(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{369:function(v,_,t){"use strict";t.r(_);var e=t(43),a=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"对称加密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#对称加密"}},[v._v("#")]),v._v(" 对称加密")]),v._v(" "),t("p",[v._v("加秘和解秘用同一个秘钥的加秘方式叫做对称加秘")]),v._v(" "),t("p",[v._v("会产生的问题")]),v._v(" "),t("p",[v._v("1.许多客户端不可能都用同一秘钥进行加秘,解决办法就是使用一个客户端使用一个密钥进行加密。")]),v._v(" "),t("p",[v._v("2.但是，随之产生的问题,加密的密钥如何传输，"),t("code",[v._v("一端生成一个秘钥，然后通过HTTP传输给另一端")])]),v._v(" "),t("p",[v._v("3.如果传输中被拦截，那么"),t("code",[v._v("密钥也会被获取")]),v._v(",如果对密钥再进行加密，那么"),t("code",[v._v("又怎么保存对密钥加密的过程")])]),v._v(" "),t("h2",{attrs:{id:"非对称加密"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密"}},[v._v("#")]),v._v(" 非对称加密")]),v._v(" "),t("ul",[t("li",[v._v("有一对秘钥，"),t("code",[v._v("公钥")]),v._v("和"),t("code",[v._v("私钥")]),v._v("。")]),v._v(" "),t("li",[v._v("公钥加密的内容，只有私钥可以解开，私钥加密的内容，所有的公钥都可以解开，这里说的"),t("code",[v._v("公钥都可以解开，指的是一对秘钥")]),v._v("。")]),v._v(" "),t("li",[v._v("公钥可以发送给所有的客户端，私钥只保存在服务器端。")])]),v._v(" "),t("h3",{attrs:{id:"主要工作流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主要工作流程"}},[v._v("#")]),v._v(" 主要工作流程")]),v._v(" "),t("img",{attrs:{src:v.$withBase("/imgs/miyao.png"),alt:"miyao"}}),v._v(" "),t("h3",{attrs:{id:"步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[v._v("#")]),v._v(" 步骤")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("Client 发起一个 HTTPS 请求，连接 443 端口。这个过程可以理解成是"),t("code",[v._v("请求公钥的过程")]),v._v("。")])]),v._v(" "),t("li",[t("p",[v._v("Server 端收到请求后，通过第三方机构私钥加密，会把数字证书（也可以认为是公钥证书）发送给 Client。")])]),v._v(" "),t("li")]),v._v(" "),t("ul",[t("li",[v._v("浏览器安装后会自动带一些权威第三方机构公钥，使用匹配的公钥对数字签名进行解密。")]),v._v(" "),t("li",[v._v("根据签名生成的规则对网站信息进行本地签名生成，然后两者比对。")]),v._v(" "),t("li",[v._v("通过比对两者签名，匹配则说明认证通过，不匹配则获取证书失败。")])]),v._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[v._v("在安全拿到"),t("code",[v._v("服务器公钥")]),v._v("后，客户端 Client 随机生成一个"),t("code",[v._v("对称密钥")]),v._v("，使用"),t("code",[v._v("服务器公钥")]),v._v("（证书的公钥）加密这个"),t("code",[v._v("对称密钥")]),v._v("，发送给 Server(服务器)。")])]),v._v(" "),t("li",[t("p",[v._v("Server(服务器)通过自己的私钥，对信息解密，至此得到了"),t("code",[v._v("对称密钥")]),v._v("，此时两者都拥有了相同的"),t("code",[v._v("对称密钥")]),v._v("。")])])]),v._v(" "),t("ul",[t("li",[v._v("Client 用户使用该"),t("code",[v._v("对称密钥")]),v._v("加密'明文内容 B',发送给 Server(服务器)")])]),v._v(" "),t("ul",[t("li",[v._v("Server 使用该"),t("code",[v._v("对称密钥")]),v._v("进行解密消息，得到明文内容 B。")])]),v._v(" "),t("p",[v._v("如此，又会产生一个问题，"),t("code",[v._v("如果公钥被中间人拿到纂改怎么办?客户端可能拿到的公钥是假的，有什么解决办法？")])]),v._v(" "),t("h3",{attrs:{id:"第三方认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三方认证"}},[v._v("#")]),v._v(" 第三方认证")]),v._v(" "),t("p",[v._v("简单说，就是"),t("code",[v._v("通过某种规范可以让客户端和服务器都遵循某种约定")]),v._v(",即第三方认证。\n在 HTTPS 中，通过 "),t("code",[v._v("证书")]),v._v("+"),t("code",[v._v("数字签名")]),v._v("来解决这个问题。")]),v._v(" "),t("img",{attrs:{src:v.$withBase("/imgs/disanfang.png"),alt:"disanfang"}}),v._v(" "),t("p",[v._v("不同的是，假设对网站信息加密的算法是 MD5，通过 MD5 加密后，然后通过第三方机构的私钥再次对其加密，生成"),t("code",[v._v("数字签名")]),v._v("。")]),v._v(" "),t("p",[v._v("如此，数字证书包含有两个特别重要的信息 "),t("code",[v._v("某网站公钥+数字签名")])]),v._v(" "),t("p",[v._v("假设中间人截取到服务器的公钥后，去替换成自己的公钥，因为有数字签名的存在，这样子客户端验证发现数字签名不匹配，这样子就防止中间人替换公钥的问题。")]),v._v(" "),t("ul",[t("li",[t("p",[v._v("浏览器会去安装一些比较权威的第三方认证机构的公钥，比如 VeriSign、Symantec 以及 GlobalSign 等等。")])]),v._v(" "),t("li",[t("p",[v._v("验证数字签名的时候，会直接从本地拿到相应的第三方的公钥，对私钥加密后的数字签名进行解密得到真正的签名。")])])]),v._v(" "),t("ul",[t("li",[v._v("然后客户端利用签名生成规则进行签名生成，看两个签名是否匹配，如果匹配认证通过，不匹配则获取证书失败。")])]),v._v(" "),t("h3",{attrs:{id:"数字签名的作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数字签名的作用"}},[v._v("#")]),v._v(" 数字签名的作用")]),v._v(" "),t("p",[v._v("将网站的信息，通过特定的算法加密，比如 MD5,加密之后，再通过服务器的私钥进行加密，形成"),t("code",[v._v("加密后的数字签名")]),v._v("。")]),v._v(" "),t("p",[v._v("第三方认证机构是一个公开的平台，中间人可以去获取。")]),v._v(" "),t("p",[v._v("如果没有数字签名的话，那么")]),v._v(" "),t("img",{attrs:{src:v.$withBase("/imgs/qianming.png"),alt:"qianming"}}),v._v(" "),t("p",[v._v("如果"),t("code",[v._v("只是对网站信息进行第三方机构私钥加密")]),v._v("的话，还是会受到欺骗。")]),v._v(" "),t("p",[v._v("因为没有认证，所以中间人也向第三方认证机构进行申请，然后拦截后把所有的信息都替换成自己的，客户端仍然可以解密，并且无法判断这是服务器的还是中间人的，最后造成数据泄露。")])])}),[],!1,null,null,null);_.default=a.exports}}]);